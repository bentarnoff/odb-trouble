
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="./assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.4.1">
    
    
      
        <title>ON-DEMAND SERVICES TROUBLESHOOTING GUIDE</title>
      
    
    
      <script src="./assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="./assets/stylesheets/application-76741b64bc.css">
      
        <link rel="stylesheet" href="./assets/stylesheets/application-66fa0d9bba.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="./css/highlight-fix.css">
    
      <link rel="stylesheet" href="./css/solarized_dark.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="." title="ON-DEMAND SERVICES TROUBLESHOOTING GUIDE" class="md-logo md-header-nav__button">
            <img src="./images/pivotal-logo.png" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Home
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/kdudala1/odb-trouble" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kdudala1/odb-trouble
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="./images/pivotal-logo.png">
      </i>
    
    ON-DEMAND SERVICES TROUBLESHOOTING GUIDE
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/kdudala1/odb-trouble" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      kdudala1/odb-trouble
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Home
      </label>
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-bosh-and-cf-to-access-logs-and-ssh" title="Using BOSH and CF to access logs and SSH" class="md-nav__link">
    Using BOSH and CF to access logs and SSH
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-broker-logs-and-vms" title="Accessing broker logs and VM(s)" class="md-nav__link">
    Accessing broker logs and VM(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-service-instance-logs-and-vms" title="Accessing service instance logs and VM(s)" class="md-nav__link">
    Accessing service instance logs and VM(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-a-cf-error-message" title="Parsing a CF error message" class="md-nav__link">
    Parsing a CF error message
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smoke-tests-checks-and-errands" title="Smoke Tests, Checks, and Errands" class="md-nav__link">
    Smoke Tests, Checks, and Errands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-resource-saturation-and-scaling-resources" title="Viewing resource saturation and scaling resources" class="md-nav__link">
    Viewing resource saturation and scaling resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-quota-saturation-and-number-of-service-instances" title="Monitoring quota saturation and number of service instances" class="md-nav__link">
    Monitoring quota saturation and number of service instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-errors" title="Common Errors" class="md-nav__link">
    Common Errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-upgrades" title="Installation and Upgrades" class="md-nav__link">
    Installation and Upgrades
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bosh-problems" title="BOSH problems" class="md-nav__link">
    BOSH problems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" title="Authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" title="Networking" class="md-nav__link">
    Networking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quotas" title="Quotas" class="md-nav__link">
    Quotas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failing-jobs-and-unhealthy-instances" title="Failing jobs and unhealthy instances" class="md-nav__link">
    Failing jobs and unhealthy instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#missing-logs-and-metrics" title="Missing logs and metrics" class="md-nav__link">
    Missing logs and metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orphaned-instances" title="Orphaned Instances" class="md-nav__link">
    Orphaned Instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filing-a-support-ticket" title="Filing a support ticket" class="md-nav__link">
    Filing a support ticket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knowledge-base-community" title="Knowledge Base (Community)" class="md-nav__link">
    Knowledge Base (Community)
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="index2/" title="Index2" class="md-nav__link">
      Index2
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-bosh-and-cf-to-access-logs-and-ssh" title="Using BOSH and CF to access logs and SSH" class="md-nav__link">
    Using BOSH and CF to access logs and SSH
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-broker-logs-and-vms" title="Accessing broker logs and VM(s)" class="md-nav__link">
    Accessing broker logs and VM(s)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-service-instance-logs-and-vms" title="Accessing service instance logs and VM(s)" class="md-nav__link">
    Accessing service instance logs and VM(s)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-a-cf-error-message" title="Parsing a CF error message" class="md-nav__link">
    Parsing a CF error message
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smoke-tests-checks-and-errands" title="Smoke Tests, Checks, and Errands" class="md-nav__link">
    Smoke Tests, Checks, and Errands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#viewing-resource-saturation-and-scaling-resources" title="Viewing resource saturation and scaling resources" class="md-nav__link">
    Viewing resource saturation and scaling resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-quota-saturation-and-number-of-service-instances" title="Monitoring quota saturation and number of service instances" class="md-nav__link">
    Monitoring quota saturation and number of service instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-errors" title="Common Errors" class="md-nav__link">
    Common Errors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation-and-upgrades" title="Installation and Upgrades" class="md-nav__link">
    Installation and Upgrades
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bosh-problems" title="BOSH problems" class="md-nav__link">
    BOSH problems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" title="Authentication" class="md-nav__link">
    Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" title="Networking" class="md-nav__link">
    Networking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quotas" title="Quotas" class="md-nav__link">
    Quotas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failing-jobs-and-unhealthy-instances" title="Failing jobs and unhealthy instances" class="md-nav__link">
    Failing jobs and unhealthy instances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#missing-logs-and-metrics" title="Missing logs and metrics" class="md-nav__link">
    Missing logs and metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orphaned-instances" title="Orphaned Instances" class="md-nav__link">
    Orphaned Instances
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filing-a-support-ticket" title="Filing a support ticket" class="md-nav__link">
    Filing a support ticket
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#knowledge-base-community" title="Knowledge Base (Community)" class="md-nav__link">
    Knowledge Base (Community)
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/kdudala1/odb-trouble/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                <h1 id="odb-troubleshooting-guide">ODB TROUBLESHOOTING GUIDE<a class="headerlink" href="#odb-troubleshooting-guide" title="Permanent link">&para;</a></h1>
<h2 id="using-bosh-and-cf-to-access-logs-and-ssh">Using BOSH and CF to access logs and SSH<a class="headerlink" href="#using-bosh-and-cf-to-access-logs-and-ssh" title="Permanent link">&para;</a></h2>
<ol>
<li>Follow the steps described here to <a href="https://docs.pivotal.io/pivotalcf/1-9/customizing/trouble-advanced.html#prepare">target your BOSH CLI</a> and <a href="https://docs.cloudfoundry.org/cf-cli/getting-started.html">log-in to your CF CLI</a></li>
</ol>
<h3 id="accessing-broker-logs-and-vms">Accessing broker logs and VM(s)<a class="headerlink" href="#accessing-broker-logs-and-vms" title="Permanent link">&para;</a></h3>
<ol>
<li>Identify the ODB deployment using <code class="codehilite">bosh deployments</code></li>
<li>Download the ODB manifest using <code class="codehilite">bosh download manifest &lt;odb-deployment-name&gt; odb.yml</code></li>
<li>Select the ODB deployment using <code class="codehilite">bosh deployment odb.yml</code></li>
<li>View VMs in the deployment using <code class="codehilite">bosh instances</code></li>
<li>Download broker logs by using the <code class="codehilite">bosh logs &lt;instance-id&gt;</code> command</li>
<li>To ssh onto the VM use <code class="codehilite">bosh ssh &lt;instance-id&gt;</code></li>
</ol>
<h3 id="accessing-service-instance-logs-and-vms">Accessing service instance logs and VM(s)<a class="headerlink" href="#accessing-service-instance-logs-and-vms" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>To target an individual service instance deployment, retrieve the 
the guid of your service instance with the CF CLI command <code class="codehilite">$ cf service <span class="o">{</span>YOUR_SERVICE<span class="o">}</span> --guid</code></p>
</li>
<li>
<p>Pre-pend the text <code class="codehilite">service_instance-</code> to the guid you just obtained to create the ID that BOSH uses for your service instance (e.g. if your guid is <code class="codehilite">1Hy6H</code>), this becomes <code class="codehilite">service_instance-1Hy6H</code>).</p>
</li>
<li>
<p>Download your bosh manifest for the service using <code class="codehilite">$ bosh download manifest service_instance-guid myservice.yml</code></p>
</li>
<li>Select the deployment using <code class="codehilite">bosh deployment myservice.yml</code></li>
<li>View VMs in the deployment using <code class="codehilite">bosh instances</code></li>
<li>Download instance logs by using the <code class="codehilite">bosh logs &lt;instance-id&gt;</code> command</li>
<li>To ssh onto the VM use <code class="codehilite">bosh ssh &lt;instance-id&gt;</code></li>
</ol>
<h2 id="parsing-a-cf-error-message">Parsing a CF error message<a class="headerlink" href="#parsing-a-cf-error-message" title="Permanent link">&para;</a></h2>
<p>Failed operations (create, update, bind, unbind, delete) will result in an error message that can be retrieved using the CF cli</p>
<p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ cf service myservice

Service instance: myservice
Service: super-db
Bound apps:
Tags:
Plan: dedicated-vm
Description: Dedicated Instance
Documentation url:
Dashboard: 

Last Operation
Status: create failed
<span class="hll">Message: Instance provisioning failed: There was a problem completing your request. 
</span><span class="hll">         Please contact your operations team providing the following information: 
</span><span class="hll">         service: redis-acceptance, 
</span><span class="hll">         service-instance-guid: ae9e232c-0bd5-4684-af27-1b08b0c70089,
</span><span class="hll">         broker-request-id: 63da3a35-24aa-4183-aec6-db8294506bac, 
</span><span class="hll">         task-id: <span class="m">442</span>, 
</span><span class="hll">         operation: create
</span>Started: <span class="m">2017</span>-03-13T10:16:55Z
Updated: <span class="m">2017</span>-03-13T10:17:58Z
</pre></div>
</td></tr></table>
The information under the "Message" field can be used to debug further. Please provide this information to Pivotal Support when filing a ticket.</p>
<p>The <code class="codehilite">task-id</code> field maps to the BOSH task id. For further information on a failed BOSH task, use the <code class="codehilite">bosh task &lt;task-id&gt;</code> command in the BOSH CLI.</p>
<p>The <code class="codehilite">broker-request-guid</code> maps to the portion of the On-Demand Broker log containing the failed step. Access the broker log via your syslog aggregator, or access bosh logs for the broker by typing <code class="codehilite">bosh logs broker 0</code>. If you have more than one broker instance, you will need to repeat this process for each instance.</p>
<h2 id="smoke-tests-checks-and-errands">Smoke Tests, Checks, and Errands<a class="headerlink" href="#smoke-tests-checks-and-errands" title="Permanent link">&para;</a></h2>
<h2 id="viewing-resource-saturation-and-scaling-resources">Viewing resource saturation and scaling resources<a class="headerlink" href="#viewing-resource-saturation-and-scaling-resources" title="Permanent link">&para;</a></h2>
<p>Once a deployment has been selected, you can use the <code class="codehilite">bosh vms --vitals</code> or the <code class="codehilite">bosh instances --vitals</code> commands to view current resource utilization. You can also view process level information by using <code class="codehilite">bosh instances --ps</code>.</p>
<h2 id="monitoring-quota-saturation-and-number-of-service-instances">Monitoring quota saturation and number of service instances<a class="headerlink" href="#monitoring-quota-saturation-and-number-of-service-instances" title="Permanent link">&para;</a></h2>
<h2 id="common-errors">Common Errors<a class="headerlink" href="#common-errors" title="Permanent link">&para;</a></h2>
<h3 id="installation-and-upgrades">Installation and Upgrades<a class="headerlink" href="#installation-and-upgrades" title="Permanent link">&para;</a></h3>
<p>Certificate issues - ODB requires valid certificates 
Deploy fails
Network issues
Network broker is being deployed to is cannot reach the BOSH director
Network broker is being deployed to can’t reach CF
Register broker fails
Tile is being reinstalled and was not correctly uninstalled [existing issue for all tiles]
Smoke test failed
Network issues
CF cannot reach the service broker
CF cannot reach the service instances
service network cannot access the BOSH director
Resource sizing issues
The resource sizes selected for a given plan are less than the service requires to function.
Service specific issues</p>
<h3 id="bosh-problems">BOSH problems<a class="headerlink" href="#bosh-problems" title="Permanent link">&para;</a></h3>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h3>
<h3 id="networking">Networking<a class="headerlink" href="#networking" title="Permanent link">&para;</a></h3>
<p>Common issues include:</p>
<ol>
<li>Network latency issues when connecting to the service instance to create or delete a binding. Solution is to try again or improve network performance</li>
<li>Network firewall rules are blocking connections from the service broker to the service instance. In OpsManager go into the tile and see the two networks that are configured in the networks tab. Ensure that these networks allow access to each other.</li>
</ol>
<p>To validate you can <code class="codehilite">bosh ssh</code> onto the service broker by first downloading the broker manifest and targeting the deployment, and try to reach the service instance. If no BOSH task-id is in the error message (same error as above, but blank after task-id: ) then look in the broker log using the broker-request-id from the task.</p>
<p>There could be a problem accessing BOSH’s UAA or the BOSH director
Follow network troubleshooting and check BOSH director is online</p>
<h3 id="quotas">Quotas<a class="headerlink" href="#quotas" title="Permanent link">&para;</a></h3>
<p>Plan Quota issues
If the error is “Service broker error: The quota for this service plan has been exceeded. Please contact your Operator for help.” then</p>
<p>Checking your current plan quota - TODO - write operator facing docs for ODB metrics 
Increase the plan quota
Log into ops manager
Reconfigure the quota on the plan page
Deploy the tile
Finding who is using the plan quota - TODO CF workflow</p>
<p>Global Quota issues
If the error is “Service broker error: The quota for this service has been exceeded. Please contact your Operator for help.” then
Checking your current global quota - TODO OpsManager workflow
Increase the global quota 
Log into ops manager
Reconfigure the quota on the on-demand settings page
Deploy the tile
Finding who is using the quota - TODO CF workflow</p>
<h3 id="failing-jobs-and-unhealthy-instances">Failing jobs and unhealthy instances<a class="headerlink" href="#failing-jobs-and-unhealthy-instances" title="Permanent link">&para;</a></h3>
<p>An issue with the service deployment
Run <code class="codehilite">bosh vms --vitals service-instance_$guid</code>
For additional information run <code class="codehilite">bosh instances --ps --vitals</code>
If the VM is failing you will need to follow the service specific information, as any uninstructed remediatory actions (such as running bosh restart on a VM) may cause issues in the service instance.</p>
<h3 id="missing-logs-and-metrics">Missing logs and metrics<a class="headerlink" href="#missing-logs-and-metrics" title="Permanent link">&para;</a></h3>
<p>If no logs are being emitted by the on-demand broker, check that your syslog forwarding address is correct in Ops Manager.</p>
<p>To verify if metrics are being emitted to the firehose:
1. Install the <a href="https://github.com/cloudfoundry/firehose-plugin"><code class="codehilite">cf nozzle</code> plugin</a>
2. Run <code class="codehilite">cf nozzle -f ValueMetric | grep --line-buffered “on-demand-broker/&lt;service offering name&gt;”</code></p>
<p>If no metrics appear within 5 minutes:
Verify that the broker network has access to the loggregator system, on all required ports. <a href="#filing-a-support-ticket">Contact Pivotal support</a> if you are unable to resolve the issue. </p>
<h3 id="orphaned-instances">Orphaned Instances<a class="headerlink" href="#orphaned-instances" title="Permanent link">&para;</a></h3>
<p>you can remove the deployment from BOSH and CF directly
<code class="codehilite">cf service --guid</code> 
Record this guid
<code class="codehilite">bosh delete deployment service-instance_$guid</code>
If this fails:
<code class="codehilite">bosh delete deployment service-instance_$guid --force</code>
This will ignore any errors while deleting
WARNING - this may leave IaaS resources
Next purge the service instance in CF
<code class="codehilite">cf purge-service-instance myservice</code></p>
<h2 id="filing-a-support-ticket">Filing a support ticket<a class="headerlink" href="#filing-a-support-ticket" title="Permanent link">&para;</a></h2>
<p>You can file a support ticket <a href="https://support.pivotal.io/">here</a>. Please be sure to provide the <a href="#parsing-a-cf-error-message">error message</a> from <code class="codehilite">cf service &lt;your-service&gt;</code>, in addition to your <a href="#accessing-broker-logs-and-vms">service broker logs</a> and your <a href="#accessing-service-instance-logs-and-vms">service instance logs</a> to help expedite troubleshooting.</p>
<h2 id="knowledge-base-community">Knowledge Base (Community)<a class="headerlink" href="#knowledge-base-community" title="Permanent link">&para;</a></h2>
<p>Imagine a world where we autopopulate the first 10 hits from <a href="http://discuss.pivotal.io">http://discuss.pivotal.io</a> . For now, you'll just have to click on the link.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="index2/" title="Index2" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Index2
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="./assets/javascripts/application-3964c0cb56.js"></script>
      <script>app.initialize({url:{base:"."}})</script>
      
    
    
      
    
  </body>
</html>